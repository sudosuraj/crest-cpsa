<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebApplication">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREST CPSA Practice Quiz | 803 Free MCQ Questions | AI-Powered Study Tool</title>
    <meta name="description" content="Master the CREST CPSA certification with 803 free practice questions. AI-powered explanations, progress tracking, gamification, and offline support.">
    <meta name="keywords" content="CPSA exam, CREST certification, cybersecurity quiz, penetration testing certification">
    <meta name="author" content="Suraj Sharma (sudosuraj)">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://sudosuraj.github.io/crest-cpsa/">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sudosuraj.github.io/crest-cpsa/">
    <meta property="og:title" content="CREST CPSA Practice Quiz | 803 Free Questions">
    <meta property="og:description" content="Master CPSA certification with 803 free practice questions.">
    <meta property="og:image" content="https://sudosuraj.github.io/crest-cpsa/og-image.svg">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CREST CPSA Practice Quiz | 803 Free Questions">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0d9488">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="icon-192.svg">
    <link rel="apple-touch-icon" href="icon-192.svg">
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "CREST CPSA Practice Quiz",
        "description": "Free CPSA certification practice quiz with 803 questions.",
        "url": "https://sudosuraj.github.io/crest-cpsa/",
        "applicationCategory": "EducationalApplication",
        "isAccessibleForFree": true
    }
    </script>
    
    <link rel="stylesheet" href="styles/main.css">
    <script src="vendor/chartjs/chart.umd.min.js" defer></script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div id="offline-indicator" class="offline-indicator" role="alert" hidden>
        You're offline. Quiz works, but AI features need internet.
    </div>
    
    <div class="command-palette-overlay" id="command-palette" hidden>
        <div class="command-palette">
            <div class="command-palette-header">
                <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                <input type="text" id="command-search" placeholder="Search topics, appendices..." autocomplete="off">
                <kbd>ESC</kbd>
            </div>
            <div class="command-palette-results" id="command-results"></div>
        </div>
    </div>

    <div class="app-layout" id="app-layout">
        <aside class="side-nav" id="side-nav">
            <div class="side-nav-header">
                <div class="brand">
                    <svg class="brand-icon" viewBox="0 0 24 24" width="28" height="28">
                        <path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                    </svg>
                    <span class="brand-text">CPSA</span>
                </div>
                <button class="side-nav-collapse" id="side-nav-collapse" aria-label="Collapse sidebar">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                </button>
            </div>
            
            <nav class="side-nav-menu" role="navigation">
                <button class="sidebar-nav-item toolbar-tab active" id="tab-study" data-tab="study" data-panel="study" role="tab" aria-selected="true">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/></svg>
                    <span>Study</span>
                </button>
                <button class="sidebar-nav-item toolbar-tab" id="tab-practice" data-tab="practice" data-panel="practice" role="tab" aria-selected="false">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                    <span>Practice</span>
                </button>
                <button class="sidebar-nav-item toolbar-tab" id="tab-exam" data-tab="exam" data-panel="exam" role="tab" aria-selected="false">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                    <span>Exam</span>
                </button>
                <button class="sidebar-nav-item toolbar-tab" id="tab-review" data-tab="review" data-panel="review" role="tab" aria-selected="false">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/></svg>
                    <span>Review</span>
                    <span class="nav-badge" id="review-count">0</span>
                </button>
                <button class="sidebar-nav-item toolbar-tab" id="tab-insights" data-tab="insights" data-panel="insights" role="tab" aria-selected="false">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
                    <span>Insights</span>
                </button>
                <button class="sidebar-nav-item toolbar-tab" id="tab-progress" data-tab="progress" data-panel="progress" role="tab" aria-selected="false">
                    <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"/></svg>
                    <span>Progress</span>
                </button>
            </nav>
            
            <div class="side-nav-footer">
                <div class="streak-display" title="Daily Streak">
                    <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 23c-3.65 0-6.5-2.95-6.5-6.6 0-2.19 1.4-4.46 2.2-5.54.8-1.08 1.8-2.3 2.8-3.36.5-.53 1-.97 1.5-1.5.5.53 1 .97 1.5 1.5 1 1.06 2 2.28 2.8 3.36.8 1.08 2.2 3.35 2.2 5.54 0 3.65-2.85 6.6-6.5 6.6z"/></svg>
                    <span id="streak-count">0</span>
                    <span class="streak-label">day streak</span>
                </div>
                
                <div class="side-nav-actions">
                    <button class="icon-btn" id="api-key-btn" title="API Key Settings">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
                        <span class="api-key-indicator" id="api-key-indicator" hidden></span>
                    </button>
                </div>
                
                <div class="social-links">
                    <a href="https://www.linkedin.com/in/sudosuraj/" target="_blank" rel="noopener" title="LinkedIn">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/></svg>
                    </a>
                    <a href="https://github.com/sudosuraj" target="_blank" rel="noopener" title="GitHub">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg>
                    </a>
                </div>
            </div>
        </aside>

        <main class="main-content" id="main-content">
            <header class="top-bar">
                <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Open menu">
                    <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
                </button>
                
                <nav class="breadcrumbs" id="breadcrumbs" aria-label="Breadcrumb">
                    <a href="#" class="breadcrumb-item" data-nav="home">Home</a>
                </nav>
                
                <button class="search-trigger" id="search-trigger">
                    <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                    <span>Search...</span>
                    <kbd>Ctrl+K</kbd>
                </button>
                
                <div class="stats-bar">
                    <div class="stat-item" title="Accuracy">
                        <span id="percentage">0</span>%
                    </div>
                    <div class="stat-item" title="Attempted">
                        <span id="attempted-count">0</span>
                    </div>
                    <div class="xp-display" title="XP">
                        <span class="xp-level" id="xp-level">1</span>
                        <span id="xp-text">0 XP</span>
                        <div class="xp-bar"><div class="xp-bar-fill" id="xp-bar" style="width:0%"></div></div>
                    </div>
                </div>
                
            </header>

            <div class="content-area">
                <section class="toolbar-panel active" id="study-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2>Study Notes</h2>
                        <p>CPSA Study Notes by Ravi Solanki</p>
                        <div class="study-actions">
                            <button class="action-btn primary start-practice-btn" id="go-to-practice-btn">
                                <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                                Start Practice
                            </button>
                            <a class="action-btn" href="docs/CPSA-Study-Notes-Ravi-Solanki.pdf" target="_blank" rel="noopener noreferrer">
                                <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
                                Open in New Tab
                            </a>
                        </div>
                    </div>
                    <div class="pdf-container">
                        <iframe 
                            id="pdf-viewer"
                            src="pdfjs-viewer.html"
                            title="CPSA Study Notes PDF"
                            loading="lazy"
                        ></iframe>
                    </div>
                </section>

                <section class="toolbar-panel" id="practice-panel" role="tabpanel">
                    <div id="quiz-container"></div>
                </section>

                <section class="toolbar-panel" id="exam-panel" role="tabpanel">
                    <div id="exam-container"></div>
                </section>

                <section class="toolbar-panel" id="review-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2>Review Dashboard</h2>
                        <p>Performance Analytics</p>
                    </div>
                    
                    <!-- Chart.js Dashboard -->
                    <div class="charts-dashboard">
                        <!-- Primary Metrics Row -->
                        <div class="charts-row">
                            <!-- Risk Level Gauge -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Risk Level</span>
                                    <span class="metric-badge" id="risk-badge">LOW</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="risk-gauge-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- Accuracy Doughnut -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Accuracy Rate</span>
                                    <span class="metric-trend positive" id="accuracy-trend">--</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="accuracy-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- Quick Stats -->
                            <div class="chart-card stats-card">
                                <div class="chart-header">
                                    <span class="chart-title">Quick Stats</span>
                                </div>
                                <div class="quick-stats-grid">
                                    <div class="quick-stat">
                                        <span class="stat-value" id="incorrect-count">0</span>
                                        <span class="stat-label">Incorrect</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="flagged-count">0</span>
                                        <span class="stat-label">Flagged</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="total-review-count">0</span>
                                        <span class="stat-label">To Review</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="total-attempted-review">0</span>
                                        <span class="stat-label">Attempted</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Visualization Row -->
                        <div class="charts-row">
                            <!-- Category Performance Bar Chart -->
                            <div class="chart-card wide">
                                <div class="chart-header">
                                    <span class="chart-title">Category Performance</span>
                                </div>
                                <div class="chart-container-lg">
                                    <canvas id="category-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- Performance Trend Line Chart -->
                            <div class="chart-card wide">
                                <div class="chart-header">
                                    <span class="chart-title">Performance Trend</span>
                                </div>
                                <div class="chart-container-lg">
                                    <canvas id="trend-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Weak Areas List -->
                        <div class="chart-card full-width">
                            <div class="chart-header">
                                <span class="chart-title">Priority Focus Areas</span>
                                <span class="alert-count" id="alert-count">0 areas need attention</span>
                            </div>
                            <div class="alert-list" id="review-weak-areas">
                                <p class="alert-placeholder">Complete more questions to identify weak areas</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Review Filter Section -->
                    <div class="review-filter-section">
                        <div class="filter-header">
                            <h3>Review Queue</h3>
                            <span class="queue-count" id="queue-count">0 items</span>
                        </div>
                        <div class="filter-controls">
                            <div class="review-filter-tabs">
                                <button class="filter-tab active" data-filter="all" id="filter-all-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
                                    All (<span id="filter-all-count">0</span>)
                                </button>
                                <button class="filter-tab" data-filter="incorrect" id="filter-incorrect-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
                                    Incorrect (<span id="filter-incorrect-count">0</span>)
                                </button>
                                <button class="filter-tab" data-filter="flagged" id="filter-flagged-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg>
                                    Flagged (<span id="filter-flagged-count">0</span>)
                                </button>
                            </div>
                            <div class="review-sort-options">
                                <select id="review-sort" class="filter-select">
                                    <option value="recent">Most Recent</option>
                                    <option value="category">Category (A-K)</option>
                                    <option value="severity">By Severity</option>
                                    <option value="oldest">Oldest First</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Review Actions -->
                    <div class="review-actions">
                        <button class="action-btn primary" id="review-incorrect-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/></svg>
                            Start Review Session
                        </button>
                        <button class="action-btn" id="review-flagged-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg>
                            Review Flagged Only
                        </button>
                        <button class="action-btn" id="export-report-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                            Export Report
                        </button>
                    </div>
                    
                    <!-- Review Questions List -->
                    <div class="review-list" id="review-list">
                        <div class="review-empty-state">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                            <h4>No Items to Review</h4>
                            <p>Start practicing to see your mistakes here. Questions you answer incorrectly or flag for review will appear in this queue.</p>
                        </div>
                    </div>
                </section>

                <section class="toolbar-panel" id="insights-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2>Analytics Dashboard</h2>
                        <p>Performance Intelligence</p>
                    </div>
                    
                    <!-- Chart.js Analytics Dashboard -->
                    <div class="charts-dashboard">
                        <!-- Primary KPI Row -->
                        <div class="charts-row">
                            <!-- Overall Score Gauge -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Overall Score</span>
                                    <span class="kpi-status" id="score-status">--</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="insights-gauge-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- Quick Stats Panel -->
                            <div class="chart-card stats-card">
                                <div class="chart-header">
                                    <span class="chart-title">Quick Stats</span>
                                </div>
                                <div class="quick-stats-grid">
                                    <div class="quick-stat">
                                        <span class="stat-value" id="total-attempted">0</span>
                                        <span class="stat-label">Attempted</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="total-correct">0</span>
                                        <span class="stat-label">Correct</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="study-time">0m</span>
                                        <span class="stat-label">Study Time</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="longest-streak">0</span>
                                        <span class="stat-label">Best Streak</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Mastery Doughnut -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Mastery Level</span>
                                    <span class="kpi-badge" id="mastery-badge">BEGINNER</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="mastery-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Visualization Row -->
                        <div class="charts-row">
                            <!-- Category Performance Bar Chart -->
                            <div class="chart-card wide">
                                <div class="chart-header">
                                    <span class="chart-title">Category Performance</span>
                                </div>
                                <div class="chart-container-lg" id="category-stats">
                                    <canvas id="insights-category-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- Accuracy Donut -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Accuracy Breakdown</span>
                                </div>
                                <div class="chart-container" id="accuracy-donut">
                                    <canvas id="accuracy-donut-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Activity Row -->
                        <div class="charts-row">
                            <!-- 7-Day Activity Trend -->
                            <div class="chart-card wide">
                                <div class="chart-header">
                                    <span class="chart-title">7-Day Activity Trend</span>
                                    <span class="trend-indicator positive" id="activity-trend">--</span>
                                </div>
                                <div class="chart-container-lg" id="weekly-activity-chart">
                                    <canvas id="activity-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- Practice vs Exam Comparison -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Practice vs Exam</span>
                                </div>
                                <div class="chart-container" id="practice-exam-comparison">
                                    <canvas id="comparison-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recommendations Panel -->
                        <div class="chart-card full-width">
                            <div class="chart-header">
                                <span class="chart-title">Recommendations</span>
                                <span class="alert-count" id="recommendations-count">0 suggestions</span>
                            </div>
                            <div class="alert-list" id="weak-areas">
                                <p class="alert-placeholder">Complete more questions to get personalized recommendations</p>
                            </div>
                        </div>
                        
                        <!-- Achievement Badges Row -->
                        <div class="chart-card full-width">
                            <div class="chart-header">
                                <span class="chart-title">Achievements</span>
                                <span class="badges-count" id="badges-earned">0 / 11 earned</span>
                            </div>
                            <div class="achievements-grid" id="achievements-grid"></div>
                        </div>
                        
                        <!-- Recent Activity Timeline -->
                        <div class="chart-card full-width">
                            <div class="chart-header">
                                <span class="chart-title">Recent Activity</span>
                                <span class="timeline-filter">Last 10 questions</span>
                            </div>
                            <div class="timeline-list" id="recent-activity">
                                <p class="timeline-placeholder">Answer some questions to see your activity timeline</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="toolbar-panel" id="progress-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2>Progress Tracker</h2>
                        <p>Learning Progress Monitor</p>
                    </div>
                    
                    <!-- Chart.js Progress Dashboard -->
                    <div class="charts-dashboard">
                        <!-- Primary Progress Metrics -->
                        <div class="charts-row">
                            <!-- Main Progress Doughnut -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Overall Completion</span>
                                    <span class="progress-status" id="completion-status">IN PROGRESS</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="progress-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- Progress Stats Grid -->
                            <div class="chart-card stats-card">
                                <div class="chart-header">
                                    <span class="chart-title">Progress Metrics</span>
                                </div>
                                <div class="quick-stats-grid">
                                    <div class="quick-stat">
                                        <span class="stat-value" id="questions-answered">0</span>
                                        <span class="stat-label">Questions Answered</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="appendices-started">0</span>
                                        <span class="stat-label">Appendices Started</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="current-streak">0</span>
                                        <span class="stat-label">Day Streak</span>
                                    </div>
                                    <div class="quick-stat">
                                        <span class="stat-value" id="categories-mastered">0</span>
                                        <span class="stat-label">Categories Mastered</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Exam Readiness Gauge -->
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span class="chart-title">Exam Readiness</span>
                                    <span class="readiness-badge" id="readiness-badge">NOT READY</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="readiness-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Appendix Progress Bar Chart -->
                        <div class="chart-card full-width">
                            <div class="chart-header">
                                <span class="chart-title">Appendix Progress</span>
                                <div class="appendix-legend">
                                    <span class="legend-item"><span class="legend-dot mastered"></span>Mastered (80%+)</span>
                                    <span class="legend-item"><span class="legend-dot progress"></span>In Progress</span>
                                    <span class="legend-item"><span class="legend-dot not-started"></span>Not Started</span>
                                </div>
                            </div>
                            <div class="chart-container-lg">
                                <canvas id="appendix-progress-chart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Appendix Progress Grid (kept for detailed view) -->
                        <div class="chart-card full-width">
                            <div class="chart-header">
                                <span class="chart-title">Appendix Details</span>
                            </div>
                            <div class="progress-grid" id="progress-grid-panel"></div>
                        </div>
                        
                        <!-- Actions Panel -->
                        <div class="chart-card full-width actions-panel">
                            <div class="actions-info">
                                <span>Resetting progress will clear all your answers and statistics. This action cannot be undone.</span>
                            </div>
                            <div class="progress-actions">
                                <button class="action-btn secondary" id="export-progress-btn">Export Progress</button>
                                <button class="action-btn danger" id="reset-progress-btn">Reset All Progress</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <div class="mobile-nav-overlay" id="mobile-nav-overlay" hidden></div>

    <button class="chatbot-toggle" id="chatbot-toggle" aria-label="Open AI Chat">
        <img src="https://cdn.jsdelivr.net/npm/lucide-static@0.460.0/icons/bot-message-square.svg" alt="Chat" width="24" height="24" style="filter: brightness(0) invert(1);">
    </button>
    
    <div id="chatbot-panel" class="chatbot-panel">
        <div class="chatbot-header">
            <div class="chatbot-identity">
                <div class="chatbot-avatar">
                    <img src="https://cdn.jsdelivr.net/npm/lucide-static@0.460.0/icons/bot-message-square.svg" alt="CPSA Copilot" width="24" height="24" style="filter: brightness(0) invert(1);">
                </div>
                <div>
                    <p class="chatbot-title">CPSA Copilot</p>
                    <div class="chatbot-subtitle">AI-powered assistant</div>
                </div>
            </div>
            <button id="chatbot-close" class="chatbot-close">&times;</button>
        </div>
        <div class="chat-suggestions" id="chat-suggestions"></div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input-row">
            <textarea id="chat-input" class="chat-input" placeholder="Ask a question..." rows="2"></textarea>
            <button id="chat-send" class="chat-send">
                <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
        </div>
    </div>

    <div class="modal-overlay" id="exam-modal" aria-hidden="true">
        <div class="modal" role="dialog">
            <div class="modal-header">
                <h2 id="exam-modal-title">Practice Exam</h2>
                <button class="modal-close" id="exam-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="exam-config" id="exam-config">
                    <div class="config-group">
                        <label for="exam-questions">Questions</label>
                        <select id="exam-questions">
                            <option value="10">10 questions</option>
                            <option value="25">25 questions</option>
                            <option value="50" selected>50 questions</option>
                            <option value="100">100 questions</option>
                        </select>
                    </div>
                    <div class="config-group">
                        <label for="exam-time">Time Limit</label>
                        <select id="exam-time">
                            <option value="0">No limit</option>
                            <option value="600">10 min</option>
                            <option value="1500">25 min</option>
                            <option value="3000" selected>50 min</option>
                        </select>
                    </div>
                    <div class="config-group">
                        <label for="exam-categories">Categories</label>
                        <select id="exam-categories">
                            <option value="all">All</option>
                        </select>
                    </div>
                    <button class="btn-primary" id="start-exam-confirm">Start Exam</button>
                </div>
                <div class="exam-progress" id="exam-progress" style="display:none">
                    <div class="exam-timer" id="exam-timer-display">50:00</div>
                    <div class="exam-stats"><span id="exam-answered">0</span> / <span id="exam-total">50</span></div>
                    <div class="exam-progress-bar"><div class="exam-progress-fill" id="exam-progress-fill"></div></div>
                </div>
                <div class="exam-results" id="exam-results" style="display:none">
                    <h3>Exam Complete!</h3>
                    <div class="results-score">
                        <span class="score-value" id="exam-score">0%</span>
                        <span class="score-label">Score</span>
                    </div>
                    <div class="results-breakdown">
                        <div class="breakdown-item"><span class="breakdown-value" id="exam-correct">0</span><span class="breakdown-label">Correct</span></div>
                        <div class="breakdown-item"><span class="breakdown-value" id="exam-incorrect">0</span><span class="breakdown-label">Incorrect</span></div>
                        <div class="breakdown-item"><span class="breakdown-value" id="exam-time-taken">0:00</span><span class="breakdown-label">Time</span></div>
                    </div>
                    <button class="btn-primary" id="exam-review-btn">Review</button>
                    <button class="btn-secondary" id="exam-retry-btn">Retry</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="api-key-modal" aria-hidden="true">
        <div class="modal" role="dialog">
            <div class="modal-header">
                <h2 id="api-key-modal-title">LLM Settings (Optional)</h2>
                <button class="modal-close" id="api-key-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Configure your own OpenAI-compatible LLM for AI features. Leave empty to use defaults.</p>
                <form id="api-key-form" onsubmit="return false;">
                    <div class="config-group">
                        <label for="api-key-input">API Key</label>
                        <input type="password" id="api-key-input" placeholder="sk-... or your API key" autocomplete="off">
                    </div>
                    <div class="config-group">
                        <label for="custom-endpoint-input">Custom Endpoint URL (Optional)</label>
                        <input type="url" id="custom-endpoint-input" placeholder="https://api.openai.com/v1/chat/completions" autocomplete="off">
                        <small class="input-hint">OpenAI-compatible API endpoint. HTTPS required for non-localhost.</small>
                    </div>
                    <div class="config-group">
                        <label for="custom-model-input">Custom Model (Optional)</label>
                        <input type="text" id="custom-model-input" placeholder="gpt-4o-mini" autocomplete="off">
                        <small class="input-hint">Model name (e.g., gpt-4o, claude-3-opus, mistral-large)</small>
                    </div>
                    <div class="api-key-status" id="api-key-status"></div>
                    <div class="modal-actions">
                        <button type="button" class="btn-primary" id="save-api-key">Save Settings</button>
                        <button type="button" class="btn-secondary" id="clear-api-key">Clear All</button>
                    </div>
                </form>
                <p class="api-key-note">[!] Default: <a href="https://token.llm7.io" target="_blank">LLM7.io</a> (free). Or use your own OpenAI/compatible provider.</p>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="analytics-modal" aria-hidden="true">
        <div class="modal modal-large" role="dialog">
            <div class="modal-header">
                <h2 id="analytics-modal-title">Analytics</h2>
                <button class="modal-close" id="analytics-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="analytics-tabs">
                    <button class="analytics-tab active" data-tab="overview">Overview</button>
                    <button class="analytics-tab" data-tab="trends">Trends</button>
                    <button class="analytics-tab" data-tab="missed">Missed</button>
                </div>
                <div class="analytics-content">
                    <div class="analytics-panel active" id="analytics-overview">
                        <div class="stats-grid">
                            <div class="stat-card"><span class="stat-value" id="analytics-total-attempted">0</span><span class="stat-label">Attempted</span></div>
                            <div class="stat-card"><span class="stat-value" id="analytics-total-correct">0</span><span class="stat-label">Correct</span></div>
                            <div class="stat-card"><span class="stat-value" id="analytics-overall-accuracy">0%</span><span class="stat-label">Accuracy</span></div>
                            <div class="stat-card"><span class="stat-value" id="analytics-study-time">0h</span><span class="stat-label">Time</span></div>
                        </div>
                    </div>
                    <div class="analytics-panel" id="analytics-trends">
                        <h3>Progress Over Time</h3>
                        <div class="trend-chart" id="trend-chart"><canvas id="trend-canvas"></canvas></div>
                    </div>
                    <div class="analytics-panel" id="analytics-missed">
                        <h3>Most Missed</h3>
                        <div id="missed-questions-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <div class="toast-container" id="toast-container"></div>
        <button class="back-to-top" id="back-to-top" aria-label="Back to top">
        <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
    </button>

    <div id="p2p-status" class="p2p-status" title="P2P Sync">
        <span class="p2p-icon"><svg viewBox="0 0 24 24" width="14" height="14"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg></span>
        <span id="p2p-online-count">1</span> online
    </div>

    <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
    <script src="js/config.js"></script>
    <script src="js/db-utils.js"></script>
    <script src="js/llm-client.js"></script>
    <script src="js/question-cache.js"></script>
    <script src="js/rag.js"></script>
    <script src="js/p2p-sync.js"></script>
    <script src="js/quiz-data.js"></script>
    <script src="js/exam-questions.js"></script>
    <script src="js/app.js" defer></script>
</body>
</html>
